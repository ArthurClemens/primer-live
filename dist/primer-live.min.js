var I=Object.defineProperty,F=Object.defineProperties,C=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,E=(t,e,r)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x=(t,e)=>{for(var r in e||(e={}))H.call(e,r)&&E(t,r,e[r]);if(w)for(var r of w(e))V.call(e,r)&&E(t,r,e[r]);return t},N=(t,e)=>F(t,C(e)),d=(t,e,r)=>new Promise((i,o)=>{var a=n=>{try{s(r.next(n))}catch(l){o(l)}},u=n=>{try{s(r.throw(n))}catch(l){o(l)}},s=n=>n.done?i(n.value):Promise.resolve(n.value).then(a,u);s((r=r.apply(t,e)).next())}),L=t=>new Promise(e=>setTimeout(e,t)),M=(t,e)=>e.reduce((r,i)=>r!=="0s"?r:t.getPropertyValue(i),"0s"),T=({domElement:t,props:e})=>{let r=document.defaultView;if(r){let i=r.getComputedStyle(t);if(i)return M(i,e)}},O=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},m=t=>{let e=T({domElement:t,props:["animation-duration","transition-duration"]}),r=e!==void 0?O(e):0,i=T({domElement:t,props:["animation-delay","transition-delay"]}),o=i!==void 0?O(i):0;return r+o},R=t=>t.scrollTop,q=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k=(t,e)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(r=>t instanceof r)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",j=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(r=>k(r,!0)).sort((r,i)=>r.tabIndex-i.tabIndex)[0],b="[data-prompt]",G="[data-content]",U="[data-touch]",B="[data-toggle]",K="ismodal",W="isescapable",$="isfocusfirst",z="focusfirst",S="isopen",P="isshowing",A="ishiding",v="islocked",J=300,g=(t,...e)=>d(void 0,[t,...e],function*(r,i={}){let{content:o,root:a,isDetails:u,isEscapable:s,escapeListener:n}=r;if(a.dataset[v]!==void 0&&!i.isIgnoreLockDuration)return;i.willHide&&i.willHide(r),delete a.dataset[P],a.dataset[A]="";let l=m(o);yield L(l),u&&a.removeAttribute("open"),delete a.dataset[A],delete a.dataset[S],i.didHide&&i.didHide(r),s&&window.removeEventListener("keydown",n)}),_=(t,...e)=>d(void 0,[t,...e],function*(r,i={}){let{content:o,root:a,isDetails:u,isEscapable:s,isFocusFirst:n,focusFirstSelector:l,escapeListener:p}=r;if(a.dataset[v]!==void 0)return;a.dataset[v]="",setTimeout(()=>{a&&delete a.dataset[v]},J),s&&window.addEventListener("keydown",p),u&&a.setAttribute("open",""),a.dataset[S]="",R(a),a.dataset[P]="",i.willShow&&i.willShow(r);let y=m(o);if(yield L(y),n){let c=j(o);c&&c.focus()}else if(l){let c=o.querySelector(l);c&&c.focus()}i.didShow&&i.didShow(r)}),h=(t,...e)=>d(void 0,[t,...e],function*(r,i=2,o){switch(i){case 0:return yield _(r,o);case 1:return yield g(r,o);default:return q(r.content)?yield g(r,o):yield _(r,o)}});function Q(t,e,r){let i=null;if(!e&&t?i=t:typeof e=="string"?i=document.querySelector(e):e&&e.tagName&&(i=e.closest(b)),!i){console.error("Prompt element 'data-root' not found");return}let o=i.querySelector(G);if(!o){console.error("Prompt element 'data-content' not found");return}let a=i.querySelector(B)||i.querySelector("summary"),u=i.querySelector(U),s=i.tagName==="DETAILS",n=i.dataset[K]!==void 0,l=i.dataset[W]!==void 0,p=i.dataset[$]!==void 0,y=i.dataset[z],c={root:i,isDetails:s,isModal:n,isEscapable:l,isFocusFirst:p,focusFirstSelector:y,toggle:a,content:o,touchLayer:u,escapeListener:function(D){D.key==="Escape"&&[].slice.call(document.querySelectorAll(`${b}[data-${S}]`)).reverse()[0]===c.root&&g(c,N(x({},r),{isIgnoreLockDuration:!0}))}};return c}var X=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>d(void 0,null,function*(){r.preventDefault(),r.stopPropagation(),h(t)})),e.dataset.registered="")},Y=t=>{let{touchLayer:e,isModal:r}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",i=>d(void 0,null,function*(){i.target===e&&(i.stopPropagation(),r||h(t,1))})),e.dataset.registered="")};function f(t,e,r,i){return d(this,null,function*(){let o=Q(t.el,e,r);if(o===void 0)return;X(o),Y(o);let{root:a,isDetails:u}=o;u&&a.getAttribute("open")!==null&&i!==1&&_(o,r),i!==void 0&&(yield h(o,i,r))})}var Z={mounted(){f(this)},init(t,e){return d(this,null,function*(){yield f(this,t,e)})},toggle(t,e){return d(this,null,function*(){yield f(this,t,e,2)})},show(t,e){return d(this,null,function*(){yield f(this,t,e,0)})},hide(t,e){return d(this,null,function*(){yield f(this,t,e,1)})}};window.Prompt=Z;export{Z as Prompt};
