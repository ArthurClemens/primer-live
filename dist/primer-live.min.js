var s=(t,e,i)=>new Promise((r,o)=>{var n=a=>{try{d(i.next(a))}catch(u){o(u)}},l=a=>{try{d(i.throw(a))}catch(u){o(u)}},d=a=>a.done?r(a.value):Promise.resolve(a.value).then(n,l);d((i=i.apply(t,e)).next())}),w=t=>new Promise(e=>setTimeout(e,t)),O=(t,e)=>e.reduce((i,r)=>i!=="0s"?i:t.getPropertyValue(r),"0s"),T=({domElement:t,props:e})=>{let i=document.defaultView;if(i){let r=i.getComputedStyle(t);if(r)return O(r,e)}},E=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},L=t=>{let e=T({domElement:t,props:["animation-duration","transition-duration"]}),i=e!==void 0?E(e):0,r=T({domElement:t,props:["animation-delay","transition-delay"]}),o=r!==void 0?E(r):0;return i+o},D=t=>t.scrollTop,I=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},F=(t,e)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(i=>t instanceof i)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",C=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(i=>F(i,!0)).sort((i,r)=>i.tabIndex-r.tabIndex)[0],m="[data-prompt]",H="[data-content]",P="[data-touch]",x="[data-toggle]",V="ismodal",M="isescapable",N="isfocusfirst",R="focusfirst",b="isopen",_="isshowing",A="ishiding",y="islocked",q=300,g=(t,...e)=>s(void 0,[t,...e],function*(i,r={}){let{content:o,root:n,isDetails:l}=i;if(n.dataset[y]!==void 0)return;r.willHide&&r.willHide(i),delete n.dataset[_],n.dataset[A]="";let d=L(o);yield w(d),l&&n.removeAttribute("open"),delete n.dataset[A],delete n.dataset[b],r.didHide&&r.didHide(i)}),S=(t,...e)=>s(void 0,[t,...e],function*(i,r={}){let{content:o,root:n,isDetails:l,isEscapable:d,isFocusFirst:a,focusFirstSelector:u,escapeListener:p}=i;if(n.dataset[y]!==void 0)return;r.willShow&&r.willShow(i),n.dataset[y]="",setTimeout(()=>{n&&delete n.dataset[y]},q),d&&window.addEventListener("keydown",p,{once:!0}),l&&n.setAttribute("open",""),n.dataset[b]="",D(n),n.dataset[_]="";let v=L(o);if(yield w(v),a){let c=C(o);c&&c.focus()}else if(u){let c=o.querySelector(u);c&&c.focus()}r.didShow&&r.didShow(i)}),h=(t,...e)=>s(void 0,[t,...e],function*(i,r=2,o){switch(r){case 0:return yield S(i,o);case 1:return yield g(i,o);default:return I(i.content)?yield g(i,o):yield S(i,o)}});function k(t,e){let i=null;if(!e&&t?i=t:typeof e=="string"?i=document.querySelector(e):e&&!!e.tagName&&(i=e.closest(m)),!i){console.error("Prompt element 'data-root' not found");return}let r=i.querySelector(H);if(!r){console.error("Prompt element 'data-content' not found");return}let o=i.querySelector(x)||i.querySelector("summary"),n=i.querySelector(P),l=i.tagName==="DETAILS",d=i.dataset[V]!==void 0,a=i.dataset[M]!==void 0,u=i.dataset[N]!==void 0,p=i.dataset[R],v={root:i,isDetails:l,isModal:d,isEscapable:a,isFocusFirst:u,focusFirstSelector:p,toggle:o,content:r,touchLayer:n,escapeListener:function(c){c.key==="Escape"&&g(v)}};return v}var G=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",i=>s(void 0,null,function*(){i.preventDefault(),i.stopPropagation(),h(t)})),e.dataset.registered="")},U=t=>{let{touchLayer:e,isModal:i}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>s(void 0,null,function*(){r.stopPropagation(),i||h(t,1)})),e.dataset.registered="")},B=t=>{let{content:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",i=>s(void 0,null,function*(){i.stopPropagation()})),e.dataset.registered="")};function f(t,e,i,r){return s(this,null,function*(){let o=k(t.el,e);if(o===void 0)return;G(o),U(o),B(o);let{root:n,isDetails:l}=o;l&&n.getAttribute("open")!==null&&r!==1&&S(o,i),r!==void 0&&(yield h(o,r,i))})}var K={mounted(){f(this)},init(t,e){return s(this,null,function*(){yield f(this,t,e)})},toggle(t,e){return s(this,null,function*(){yield f(this,t,e,2)})},show(t,e){return s(this,null,function*(){yield f(this,t,e,0)})},hide(t,e){return s(this,null,function*(){yield f(this,t,e,1)})}};window.Prompt=K;export{K as Prompt};
