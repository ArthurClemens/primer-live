var I=Object.defineProperty,F=Object.defineProperties,C=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,w=(t,e,r)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x=(t,e)=>{for(var r in e||(e={}))H.call(e,r)&&w(t,r,e[r]);if(h)for(var r of h(e))V.call(e,r)&&w(t,r,e[r]);return t},N=(t,e)=>F(t,C(e)),s=(t,e,r)=>new Promise((i,o)=>{var n=a=>{try{l(r.next(a))}catch(d){o(d)}},u=a=>{try{l(r.throw(a))}catch(d){o(d)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(n,u);l((r=r.apply(t,e)).next())}),L=t=>new Promise(e=>setTimeout(e,t)),M=(t,e)=>e.reduce((r,i)=>r!=="0s"?r:t.getPropertyValue(i),"0s"),T=({domElement:t,props:e})=>{let r=document.defaultView;if(r){let i=r.getComputedStyle(t);if(i)return M(i,e)}},O=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},m=t=>{let e=T({domElement:t,props:["animation-duration","transition-duration"]}),r=e!==void 0?O(e):0,i=T({domElement:t,props:["animation-delay","transition-delay"]}),o=i!==void 0?O(i):0;return r+o},R=t=>t.scrollTop,q=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k=(t,e)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(r=>t instanceof r)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",j=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(r=>k(r,!0)).sort((r,i)=>r.tabIndex-i.tabIndex)[0],b="[data-prompt]",G="[data-content]",U="[data-touch]",B="[data-toggle]",K="ismodal",W="isescapable",$="isfocusfirst",z="focusfirst",S="isopen",P="isshowing",A="ishiding",v="islocked",J=300,g=(t,...e)=>s(void 0,[t,...e],function*(r,i={}){let{content:o,root:n,isDetails:u,isEscapable:l,escapeListener:a}=r;if(n.dataset[v]!==void 0&&!i.isIgnoreLockDuration)return;i.willHide&&i.willHide(r),delete n.dataset[P],n.dataset[A]="";let d=m(o);yield L(d),u&&n.removeAttribute("open"),delete n.dataset[A],delete n.dataset[S],i.didHide&&i.didHide(r),l&&window.removeEventListener("keydown",a)}),_=(t,...e)=>s(void 0,[t,...e],function*(r,i={}){let{content:o,root:n,isDetails:u,isEscapable:l,isFocusFirst:a,focusFirstSelector:d,escapeListener:p}=r;if(n.dataset[v]!==void 0)return;n.dataset[v]="",setTimeout(()=>{n&&delete n.dataset[v]},J),l&&window.addEventListener("keydown",p),u&&n.setAttribute("open",""),n.dataset[S]="",R(n),n.dataset[P]="",i.willShow&&i.willShow(r);let y=m(o);if(yield L(y),a){let c=j(o);c&&c.focus()}else if(d){let c=o.querySelector(d);c&&c.focus()}i.didShow&&i.didShow(r)}),E=(t,...e)=>s(void 0,[t,...e],function*(r,i=2,o){switch(i){case 0:return yield _(r,o);case 1:return yield g(r,o);default:return q(r.content)?yield g(r,o):yield _(r,o)}});function Q(t,e,r){let i=null;if(!e&&t?i=t:typeof e=="string"?i=document.querySelector(e):e&&e.tagName&&(i=e.closest(b)),!i){console.error("Prompt element 'data-root' not found");return}let o=i.querySelector(G);if(!o){console.error("Prompt element 'data-content' not found");return}let n=i.querySelector(B)||i.querySelector("summary"),u=i.querySelector(U),l=i.tagName==="DETAILS",a=i.dataset[K]!==void 0,d=i.dataset[W]!==void 0,p=i.dataset[$]!==void 0,y=i.dataset[z],c={root:i,isDetails:l,isModal:a,isEscapable:d,isFocusFirst:p,focusFirstSelector:y,toggle:n,content:o,touchLayer:u,escapeListener:function(D){D.key==="Escape"&&[].slice.call(document.querySelectorAll(`${b}[data-${S}]`)).reverse()[0]===c.root&&g(c,N(x({},r),{isIgnoreLockDuration:!0}))}};return c}var X=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>s(void 0,null,function*(){r.preventDefault(),r.stopPropagation(),E(t)})),e.dataset.registered="")},Y=t=>{let{touchLayer:e,isModal:r}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",i=>s(void 0,null,function*(){i.stopPropagation(),r||E(t,1)})),e.dataset.registered="")},Z=t=>{let{content:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>s(void 0,null,function*(){r.stopPropagation()})),e.dataset.registered="")};function f(t,e,r,i){return s(this,null,function*(){let o=Q(t.el,e,r);if(o===void 0)return;X(o),Y(o),Z(o);let{root:n,isDetails:u}=o;u&&n.getAttribute("open")!==null&&i!==1&&_(o,r),i!==void 0&&(yield E(o,i,r))})}var tt={mounted(){f(this)},init(t,e){return s(this,null,function*(){yield f(this,t,e)})},toggle(t,e){return s(this,null,function*(){yield f(this,t,e,2)})},show(t,e){return s(this,null,function*(){yield f(this,t,e,0)})},hide(t,e){return s(this,null,function*(){yield f(this,t,e,1)})}};window.Prompt=tt;export{tt as Prompt};
