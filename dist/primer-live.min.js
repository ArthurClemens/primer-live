"use strict";(()=>{var a=(e,i,t)=>new Promise((n,r)=>{var s=o=>{try{u(t.next(o))}catch(l){r(l)}},d=o=>{try{u(t.throw(o))}catch(l){r(l)}},u=o=>o.done?n(o.value):Promise.resolve(o.value).then(s,d);u((t=t.apply(e,i)).next())}),T=e=>new Promise(i=>setTimeout(i,e)),L=(e,i)=>i.reduce((t,n)=>t!=="0s"?t:e.getPropertyValue(n),"0s"),g=({domElement:e,props:i})=>{let t=document.defaultView;if(t){let n=t.getComputedStyle(e);if(n)return L(n,i)}},h=e=>{let i=parseFloat(e)*(e.indexOf("ms")===-1?1e3:1);return Number.isNaN(i)?0:i},S=e=>{let i=g({domElement:e,props:["animation-duration","transition-duration"]}),t=i!==void 0?h(i):0,n=g({domElement:e,props:["animation-delay","transition-delay"]}),r=n!==void 0?h(n):0;return t+r},O=e=>e.scrollTop,D=e=>{let i=window.getComputedStyle(e);return i.opacity==="0"||i.display==="none"?!1:!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},P="[data-prompt]",C="[data-content]",V="[data-touch]",I="[data-toggle]",N="ismodal",m="isescapable",w="isopen",A="isshowing",E="ishiding",v="islocked",b=300,f=e=>a(void 0,[e],function*({content:i,root:t,isDetails:n,isEscapable:r,escapeListener:s}){if(t.dataset[v]!==void 0)return;delete t.dataset[A],t.dataset[E]="";let d=S(i);yield T(d),n&&t.removeAttribute("open"),delete t.dataset[E],delete t.dataset[w]}),p=e=>a(void 0,[e],function*({content:i,root:t,isDetails:n,isEscapable:r,escapeListener:s}){if(t.dataset[v]!==void 0)return;t.dataset[v]="",setTimeout(()=>{t&&delete t.dataset[v]},b),r&&window.addEventListener("keydown",s,{once:!0}),n&&t.setAttribute("open",""),t.dataset[w]="",O(t),t.dataset[A]="";let d=S(i);yield T(d)}),y=(e,...i)=>a(void 0,[e,...i],function*(t,n=2){switch(n){case 0:return yield p(t);case 1:return yield f(t);default:return D(t.content)?yield f(t):yield p(t)}});function R(e,i){let t=null;if(!i&&e?t=e:typeof i=="string"?t=document.querySelector(i):i&&!!i.tagName&&(t=i.closest(P)),!t){console.error("Prompt element 'data-root' not found");return}let n=t.querySelector(C);if(!n){console.error("Prompt element 'data-content' not found");return}let r=t.querySelector(I)||t.querySelector("summary"),s=t.querySelector(V),d=t.tagName==="DETAILS",u=t.dataset[N]!==void 0,o=t.dataset[m]!==void 0,l={root:t,isDetails:d,isModal:u,isEscapable:o,toggle:r,content:n,touchLayer:s,escapeListener:function(_){_.key==="Escape"&&f(l)}};return l}var k=e=>{let{toggle:i}=e;i&&i.dataset.registered===void 0&&(i.addEventListener("click",t=>a(void 0,null,function*(){t.preventDefault(),t.stopPropagation(),y(e)})),i.dataset.registered="")},q=e=>{let{touchLayer:i,isModal:t}=e;i&&i.dataset.registered===void 0&&(i.addEventListener("click",n=>a(void 0,null,function*(){n.stopPropagation(),t||y(e,1)})),i.dataset.registered="")},x=e=>{let{content:i}=e;i&&i.dataset.registered===void 0&&(i.addEventListener("click",t=>a(void 0,null,function*(){t.stopPropagation()})),i.dataset.registered="")};function c(e,i,t){return a(this,null,function*(){let n=R(e.el,i);if(n===void 0)return;k(n),q(n),x(n);let{root:r,isDetails:s}=n;s&&r.getAttribute("open")!==null&&t!==1&&p(n),t!==void 0&&(yield y(n,t))})}var G={mounted(){c(this)},init(e){return a(this,null,function*(){yield c(this,e)})},toggle(e){return a(this,null,function*(){yield c(this,e,2)})},show(e){return a(this,null,function*(){yield c(this,e,0)})},hide(e){return a(this,null,function*(){yield c(this,e,1)})}};window.Prompt=G;})();
