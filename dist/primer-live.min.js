var D=Object.defineProperty,I=Object.defineProperties,F=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,h=(t,e,r)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V=(t,e)=>{for(var r in e||(e={}))C.call(e,r)&&h(t,r,e[r]);if(E)for(var r of E(e))H.call(e,r)&&h(t,r,e[r]);return t},x=(t,e)=>I(t,F(e)),s=(t,e,r)=>new Promise((i,o)=>{var n=a=>{try{l(r.next(a))}catch(d){o(d)}},u=a=>{try{l(r.throw(a))}catch(d){o(d)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(n,u);l((r=r.apply(t,e)).next())}),b=t=>new Promise(e=>setTimeout(e,t)),N=(t,e)=>e.reduce((r,i)=>r!=="0s"?r:t.getPropertyValue(i),"0s"),w=({domElement:t,props:e})=>{let r=document.defaultView;if(r){let i=r.getComputedStyle(t);if(i)return N(i,e)}},T=t=>{let e=parseFloat(t)*(t.indexOf("ms")===-1?1e3:1);return Number.isNaN(e)?0:e},A=t=>{let e=w({domElement:t,props:["animation-duration","transition-duration"]}),r=e!==void 0?T(e):0,i=w({domElement:t,props:["animation-delay","transition-delay"]}),o=i!==void 0?T(i):0;return r+o},M=t=>t.scrollTop,R=t=>{let e=window.getComputedStyle(t);return e.opacity==="0"||e.display==="none"?!1:!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},q=(t,e)=>t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement].some(r=>t instanceof r)&&!t.disabled||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.tabIndex===0&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true",k=t=>[].slice.call(t.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")).filter(r=>q(r,!0)).sort((r,i)=>r.tabIndex-i.tabIndex)[0],j="[data-prompt]",G="[data-content]",U="[data-touch]",B="[data-toggle]",K="ismodal",W="isescapable",z="isfocusfirst",J="focusfirst",L="isopen",m="isshowing",O="ishiding",v="islocked",Q=300,g=(t,...e)=>s(void 0,[t,...e],function*(r,i={}){let{content:o,root:n,isDetails:u,isEscapable:l,escapeListener:a}=r;if(n.dataset[v]!==void 0&&!i.isIgnoreLockDuration)return;i.willHide&&i.willHide(r),delete n.dataset[m],n.dataset[O]="";let d=A(o);yield b(d),u&&n.removeAttribute("open"),delete n.dataset[O],delete n.dataset[L],i.didHide&&i.didHide(r),l&&window.removeEventListener("keydown",a)}),_=(t,...e)=>s(void 0,[t,...e],function*(r,i={}){let{content:o,root:n,isDetails:u,isEscapable:l,isFocusFirst:a,focusFirstSelector:d,escapeListener:p}=r;if(n.dataset[v]!==void 0)return;i.willShow&&i.willShow(r),n.dataset[v]="",setTimeout(()=>{n&&delete n.dataset[v]},Q),l&&window.addEventListener("keydown",p),u&&n.setAttribute("open",""),n.dataset[L]="",M(n),n.dataset[m]="";let y=A(o);if(yield b(y),a){let c=k(o);c&&c.focus()}else if(d){let c=o.querySelector(d);c&&c.focus()}i.didShow&&i.didShow(r)}),S=(t,...e)=>s(void 0,[t,...e],function*(r,i=2,o){switch(i){case 0:return yield _(r,o);case 1:return yield g(r,o);default:return R(r.content)?yield g(r,o):yield _(r,o)}});function X(t,e,r){let i=null;if(!e&&t?i=t:typeof e=="string"?i=document.querySelector(e):e&&e.tagName&&(i=e.closest(j)),!i){console.error("Prompt element 'data-root' not found");return}let o=i.querySelector(G);if(!o){console.error("Prompt element 'data-content' not found");return}let n=i.querySelector(B)||i.querySelector("summary"),u=i.querySelector(U),l=i.tagName==="DETAILS",a=i.dataset[K]!==void 0,d=i.dataset[W]!==void 0,p=i.dataset[z]!==void 0,y=i.dataset[J],c={root:i,isDetails:l,isModal:a,isEscapable:d,isFocusFirst:p,focusFirstSelector:y,toggle:n,content:o,touchLayer:u,escapeListener:function(P){P.key==="Escape"&&[].slice.call(document.querySelectorAll("[data-prompt][data-isopen]")).reverse()[0]===c.root&&g(c,x(V({},r),{isIgnoreLockDuration:!0}))}};return c}var Y=t=>{let{toggle:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>s(void 0,null,function*(){r.preventDefault(),r.stopPropagation(),S(t)})),e.dataset.registered="")},Z=t=>{let{touchLayer:e,isModal:r}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",i=>s(void 0,null,function*(){i.stopPropagation(),r||S(t,1)})),e.dataset.registered="")},$=t=>{let{content:e}=t;e&&e.dataset.registered===void 0&&(e.addEventListener("click",r=>s(void 0,null,function*(){r.stopPropagation()})),e.dataset.registered="")};function f(t,e,r,i){return s(this,null,function*(){let o=X(t.el,e,r);if(o===void 0)return;Y(o),Z(o),$(o);let{root:n,isDetails:u}=o;u&&n.getAttribute("open")!==null&&i!==1&&_(o,r),i!==void 0&&(yield S(o,i,r))})}var tt={mounted(){f(this)},init(t,e){return s(this,null,function*(){yield f(this,t,e)})},toggle(t,e){return s(this,null,function*(){yield f(this,t,e,2)})},show(t,e){return s(this,null,function*(){yield f(this,t,e,0)})},hide(t,e){return s(this,null,function*(){yield f(this,t,e,1)})}};window.Prompt=tt;export{tt as Prompt};
